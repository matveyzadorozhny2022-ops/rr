
<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–¢–∞–ø–∞–ª–∫–∞ üéÅ</title>

<style>
*{box-sizing:border-box;touch-action:manipulation;}
body{
margin:0;padding:0;display:flex;flex-direction:column;justify-content:center;align-items:center;
font-family:"Comic Sans MS";color:#fff;text-shadow:2px 2px 5px rgba(0,0,0,.6);
background:url('fon.jpg') center/cover no-repeat;height:100dvh;overflow:hidden;
}

/* ‚úÖ –§–∏–∫—Å–∏—Ä—É–µ–º –º–µ—Å—Ç–æ –¥–ª—è —Ç–µ–∫—Å—Ç–∞ */
#message{
height:55px; /* —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ ‚Äî –Ω–µ –¥–≤–∏–≥–∞–µ—Ç—Å—è */
display:flex;align-items:center;justify-content:center;
font-size:1.25rem;text-align:center;padding:0 10px;
transition:opacity .35s ease;
}

/* Tap button */
#btn{
width:45vw;max-width:220px;cursor:pointer;border-radius:14px;
transition:transform .18s ease, opacity .35s ease;
}
#btn:active{transform:scale(.92);}
@media(max-width:480px){#btn{width:65vw;}}

/* ‚úÖ Gift smooth appear */
#gift{
width:55vw;max-width:260px;margin-top:1rem;cursor:pointer;
opacity:0;transform:scale(.7);
transition:opacity .45s ease, transform .45s ease;
pointer-events:none;
}

/* Progress Bar */
.progress-wrap{
width:52vw;max-width:360px;height:8px;background:rgba(255,255,255,.15);
border-radius:15px;overflow:hidden;margin-top:12px;
transition:opacity .4s ease;
}
.progress{
height:100%;width:0;background:linear-gradient(90deg,#FFD54A,#FF8A65);
transition:width .25s linear;
}

/* ‚úÖ Popup menu */
#confirmBox{
position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(.8);
background:rgba(0,0,0,.92);padding:22px 28px;border-radius:18px;text-align:center;
box-shadow:0 0 22px rgba(255,255,255,.25);
opacity:0;pointer-events:none;backdrop-filter:blur(4px);
transition:opacity .32s ease, transform .32s ease;
}
#confirmBox.show{
opacity:1;pointer-events:auto;transform:translate(-50%,-50%) scale(1);
}
#confirmBox p{margin-bottom:16px;font-size:1.15rem;}

.confirm-btn{
margin:6px;padding:12px 25px;border:none;border-radius:12px;
font-size:1rem;font-weight:bold;cursor:pointer;
transition:transform .12s, box-shadow .2s;
}
.confirm-btn:active{transform:scale(.92);}

/* Yellow receive */
#receiveBtn{
background:linear-gradient(180deg,#FFE600,#FFBE00);box-shadow:0 0 12px #FFD700;color:#333;
}
/* Blue sell */
#sellBtn{
background:linear-gradient(180deg,#00C6FF,#0078FF);box-shadow:0 0 12px #00BFFF;color:#fff;
}

/* Fireworks */
.firework{
position:absolute;opacity:.9;width:130px;height:130px;pointer-events:none;
will-change:transform,opacity;
}
@keyframes fall{
0%{transform:translateY(-15vh) scale(1);opacity:1;}
100%{transform:translateY(110vh) scale(1.3);opacity:0;}
}
</style>

</head>
<body>

<div id="message">üëÜ –ù–∞–∂–∏–º–∞–π, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫!</div>
<img id="btn">
<div class="progress-wrap"><div class="progress" id="tapProgress"></div></div>
<img id="gift">

<div id="confirmBox">
<p>–ü—Ä–æ–¥–∞—Ç—å –∏–ª–∏ –ø–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫?</p>
<button id="sellBtn" class="confirm-btn">–ü–†–û–î–ê–¢–¨</button>
<button id="receiveBtn" class="confirm-btn">–ü–û–õ–£–ß–ò–¢–¨</button>
</div>

<script>
const msg=document.getElementById('message');
const btn=document.getElementById('btn');
const gift=document.getElementById('gift');
const box=document.getElementById('confirmBox');
const sell=document.getElementById('sellBtn');
const recv=document.getElementById('receiveBtn');
const bar=document.querySelector('.progress-wrap');
const barFill=document.getElementById('tapProgress');

let taps=0,total=5;
btn.src=['btn1.webp','btn2.webp','btn3.webp'][Math.floor(Math.random()*3)];
const gifts = Array.from({length:15},(_,i)=>`g${i+1}.webp`);
const fw=['f1.webp','f2.webp','f3.webp'];

/* TAP */
btn.onclick=()=>{
taps++;
barFill.style.width=(taps/total*100)+'%';

/* start pulse only after first tap */
if(taps===1) btn.style.animation="pulse .6s infinite alternate";

msg.textContent = taps<total
? `–ü—Ä–æ–¥–æ–ª–∂–∞–π! –û—Å—Ç–∞–ª–æ—Å—å ${total-taps} —Ç–∞–ø–∞(–æ–≤) üéÅ`
: `üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –¢—ã –ø–æ–ª—É—á–∏–ª –ø–æ–¥–∞—Ä–æ–∫!`;

/* ‚úÖ reached gift */
if(taps==total){
btn.style.opacity=0;
bar.style.opacity=0;

/* delay remove to keep layout stable */
setTimeout(()=>{
btn.style.pointerEvents="none";
bar.style.pointerEvents="none";
},350);

/* show gift smoothly */
gift.src = gifts[Math.floor(Math.random()*gifts.length)];
gift.style.opacity=1; 
gift.style.transform="scale(1)";
gift.style.pointerEvents="auto";

launchFireworks();
}
}

/* FIREWORKS */
function launchFireworks(){
const n = innerWidth<768 ? 20 : 60;
for(let i=0;i<n;i++){
const f=document.createElement('img');
f.src=fw[Math.floor(Math.random()*fw.length)];
f.className='firework';
f.style.left = innerWidth<768 ? '50%' : Math.random()*100+'vw';
f.style.transform = innerWidth<768 ? 'translateX(-50%)' : '';
f.style.top = (Math.random()*-50)+'vh';
f.style.animation=`fall ${0.8+Math.random()*1.1}s linear ${Math.random()*0.8}s forwards`;
document.body.appendChild(f);
setTimeout(()=>f.remove(),2000);
}
}

/* ‚úÖ gift click ‚Üí menu */
gift.onclick=()=>box.classList.add('show');

/* SELL */
sell.onclick=()=>{
box.classList.remove('show');
msg.innerHTML='üí∞ –ü—Ä–æ–¥–∞–ª–∏! ‚≠ê –ó–≤–µ–∑–¥—ã —Å–∫–æ—Ä–æ –ø–æ—Å—Ç—É–ø—è—Ç!';
closeGift();
}

/* RECEIVE */
recv.onclick=()=>{
box.classList.remove('show');
msg.innerHTML='üéÅ –ü–æ–¥–∞—Ä–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –ø—Ä–æ—Ñ–∏–ª—å!';
closeGift();
}

/* smooth hide gift */
function closeGift(){
gift.style.opacity=0;
gift.style.transform="scale(.7)";
setTimeout(()=>gift.style.pointerEvents="none",350);
}
</script>

</body>
</html>
